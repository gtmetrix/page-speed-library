#!/usr/bin/python2.6
#
# Copyright 2010 Google Inc. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
"""Script to generate paths needed by gyp.

poc uses various paths for input and output for each locale it is invoked on.
Rather than listing each locale several times in pagespeed/po/po_gen.gyp, a
master list of locales is used, and this script is invoked to turn a locale name
into the appropriate path.

Usage:
  poc_gyp_helper po_files <locales>
    For each locale in <locales>, print the corresponding .po file path:
      $ poc_gyp_helper po_files "ar en_US zh"
      ar.po
      en_US.po
      zh.po

  poc_gyp_helper cc_files <path> <locales>
    For each locale in <locales>, print the corresponding .po.cc file path:
      $ poc_gyp_helper cc_files path/to/out/dir "ar en_US zh"
      path/to/out/dir/ar.po.cc
      path/to/out/dir/en_US.po.cc
      path/to/out/dir/zh.po.cc
"""

__author__ = 'aoates@google.com (Andrew Oates)'

import os
import sys


def main():
  if len(sys.argv) < 2:
    print >> sys.stderr, 'Usage: poc_gyp_helper command [args]'
    sys.exit(1)

  command = sys.argv[1]
  if command == 'po_files':
    locales = sys.argv[2].split()
    print ' '.join(['%s.po' % l for l in locales])
  elif command == 'cc_files':
    path = sys.argv[2]
    locales = sys.argv[3].split()
    files = [os.path.join(path, '%s.po.cc' % l) for l in locales]
    print ' '.join(files)
  else:
    print >> sys.stderr, 'Invalid command: %s' % command
    sys.exit(1)


if __name__ == '__main__':
  main()
